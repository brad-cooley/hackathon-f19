{"ast":null,"code":"import _slicedToArray from\"/Users/jack/Desktop/deploy/hackathon-f19/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{Container,Typography,CircularProgress}from\"@material-ui/core\";import CardGrid from\"./CardGrid\";import*as firebase from\"firebase\";require('firebase/auth');var user_uid=undefined;var firebaseAppDefined=false;setInterval(function(){if(!firebaseAppDefined)loadApp();},100);function loadApp(){if(firebase.app()){firebaseAppDefined=true;firebase.auth().signInAnonymously().catch(function(err){console.error(err.code+\": \"+err.message);});firebase.auth().onAuthStateChanged(function(user){if(user)user_uid=user.uid;});}}var useStyles=makeStyles(function(theme){return{heroContent:{padding:theme.spacing(1,0,2),maxWidth:\"100%\"},load:{align:\"center\",paddingTop:5}};});// Your web app's Firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyDkr4-pv5Hf84JmJiOaNl9T9vqDR-D6fNQ\",authDomain:\"devfest-24557.firebaseapp.com\",/* databaseURL: \"https://devfest-24557.firebaseio.com\", */projectId:\"devfest-24557\",/*storageBucket: \"devfest-24557.appspot.com\",\n  messagingSenderId: \"205291993209\",*/appId:\"1:205291993209:web:00bcf099bae983c9953ca8\",measurementId:\"G-2V3TFV6VNX\"};// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);firebase.analytics();var db=firebase.firestore();function distance(lat1,lon1,lat2,lon2){if(lat1===lat2&&lon1===lon2){return 0;}else{var radlat1=Math.PI*lat1/180;var radlat2=Math.PI*lat2/180;var theta=lon1-lon2;var radtheta=Math.PI*theta/180;var dist=Math.sin(radlat1)*Math.sin(radlat2)+Math.cos(radlat1)*Math.cos(radlat2)*Math.cos(radtheta);if(dist>1){dist=1;}dist=Math.acos(dist);dist=dist*180/Math.PI;dist=dist*60*1.1515;dist=dist*0.99999969062;return dist;}}navigator.geolocation.getCurrentPosition(function(position){startupQuery(position.coords.latitude,position.coords.longitude);});function startupQuery(){var lat=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var lon=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;// eslint-disable-next-line no-undef\nvar startTime=moment().subtract(12,\"hours\").toDate();var data=[];db.collection(\"venues\").get().then(function(venues){venues.forEach(function(venue){var ven_loc=venue.data().location;var miles=distance(ven_loc.latitude,ven_loc.longitude,lat,lon);if(miles<15){var newVenueObj={venue:venue.data(),checkins:[]};newVenueObj.venue.id=venue.id;db.collection(\"venues/\".concat(venue.id,\"/checkins\")).where(\"timestamp\",\">\",startTime).get().then(function(checkins){checkins.forEach(function(checkin){newVenueObj.checkins.push(checkin.data());});});}data.push(newVenueObj);});});}export function sendCheckIn(venue_id){db.collection(\"venues\").doc(venue_id).collection(\"checkins\").add({user_uid:user_uid,timestamp:firebase.firestore.FieldValue.serverTimestamp()}).then(function(){console.log(\"Check-in Successful!\");});}export default function Main(){var classes=useStyles();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),data=_React$useState2[0],setData=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),isLoading=_React$useState4[0],setIsLoading=_React$useState4[1];React.useEffect(function(){var lat=0,lon=0;navigator.geolocation.getCurrentPosition(function(position){lat=position.coords.latitude?position.coords.latitude:0;lon=position.coords.longitude?position.coords.longitude:0;});db.collection(\"venues\").get().then(function(venues){var temp=[];venues.forEach(function(venue){var ven_loc=venue.data().location;var miles=distance(ven_loc.latitude,ven_loc.longitude,lat,lon);if(miles<15){var newVenueObj={venue:venue.data(),checkins:[]};newVenueObj.venue.id=venue.id;db.collection(\"venues/\".concat(venue.id,\"/checkins\")).get().then(function(checkins){checkins.forEach(function(checkin){newVenueObj.checkins.push(checkin.data());});});temp.push(newVenueObj);}});setData(temp);setIsLoading(false);});},[]);return!isLoading?React.createElement(React.Fragment,null,React.createElement(\"div\",{className:classes.heroContent},React.createElement(Container,{maxWidth:\"sm\"},React.createElement(Typography,{component:\"h5\",variant:\"h6\",align:\"center\",color:\"textPrimary\",gutterBottom:true},\"Welcome to Hot List!\"),React.createElement(Typography,{variant:\"body1\",align:\"center\",color:\"textSecondary\",paragraph:true},\"This should be a blurb that says something like \\\"Looking for something quiet or something loud? We've got it below. Don't forget to check in!\\\" but sounds better.\"))),console.log(data[0]),React.createElement(CardGrid,{data:data.filter(function(value){return Object.keys(value).length!==0;}).sort(function(a,b){return a.checkins.length<b.checkins.length?1:-1;})/*data.sort((a, b) =>\n          a.checkInsToday < b.checkInsToday\n            ? 1\n            : a.checkInsToday === b.checkInsToday\n            ? a.checkInsThisWeek < b.checkInsThisWeek\n              ? 1\n              : -1\n            : -1\n        )*/})):React.createElement(CircularProgress,{className:classes.load});}","map":{"version":3,"sources":["/Users/jack/Desktop/deploy/hackathon-f19/front/src/Components/Main.js"],"names":["React","makeStyles","Container","Typography","CircularProgress","CardGrid","firebase","require","user_uid","undefined","firebaseAppDefined","setInterval","loadApp","app","auth","signInAnonymously","catch","err","console","error","code","message","onAuthStateChanged","user","uid","useStyles","theme","heroContent","padding","spacing","maxWidth","load","align","paddingTop","firebaseConfig","apiKey","authDomain","projectId","appId","measurementId","initializeApp","analytics","db","firestore","distance","lat1","lon1","lat2","lon2","radlat1","Math","PI","radlat2","theta","radtheta","dist","sin","cos","acos","navigator","geolocation","getCurrentPosition","position","startupQuery","coords","latitude","longitude","lat","lon","startTime","moment","subtract","toDate","data","collection","get","then","venues","forEach","venue","ven_loc","location","miles","newVenueObj","checkins","id","where","checkin","push","sendCheckIn","venue_id","doc","add","timestamp","FieldValue","serverTimestamp","log","Main","classes","useState","setData","isLoading","setIsLoading","useEffect","temp","filter","value","Object","keys","length","sort","a","b"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Container, Typography, CircularProgress } from \"@material-ui/core\";\nimport CardGrid from \"./CardGrid\";\nimport * as firebase from \"firebase\";\nrequire('firebase/auth')\n\nvar user_uid = undefined;\nlet firebaseAppDefined = false\n\nsetInterval(() => {\n  if (!firebaseAppDefined) loadApp()\n\n}, 100)\n\nfunction loadApp() {\n  if (firebase.app()) {\n    firebaseAppDefined = true\n\n    firebase.auth().signInAnonymously().catch((err) => {\n        console.error(err.code + \": \" + err.message)\n      })\n    firebase.auth().onAuthStateChanged((user) => {\n        if(user) \n          user_uid = user.uid\n      })\n  }\n}\n\nconst useStyles = makeStyles(theme => ({\n  heroContent: {\n    padding: theme.spacing(1, 0, 2),\n    maxWidth: \"100%\"\n  },\n  load: {\n    align: \"center\",\n    paddingTop: 5\n  }\n}));\n\n// Your web app's Firebase configuration\nvar firebaseConfig = {\n  apiKey: \"AIzaSyDkr4-pv5Hf84JmJiOaNl9T9vqDR-D6fNQ\",\n  authDomain: \"devfest-24557.firebaseapp.com\",\n  /* databaseURL: \"https://devfest-24557.firebaseio.com\", */\n  projectId: \"devfest-24557\",\n  /*storageBucket: \"devfest-24557.appspot.com\",\n  messagingSenderId: \"205291993209\",*/\n  appId: \"1:205291993209:web:00bcf099bae983c9953ca8\",\n  measurementId: \"G-2V3TFV6VNX\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\n\nvar db = firebase.firestore();\n\nfunction distance(lat1, lon1, lat2, lon2) {\n  if (lat1 === lat2 && lon1 === lon2) {\n    return 0;\n  } else {\n    var radlat1 = (Math.PI * lat1) / 180;\n    var radlat2 = (Math.PI * lat2) / 180;\n    var theta = lon1 - lon2;\n    var radtheta = (Math.PI * theta) / 180;\n    var dist =\n      Math.sin(radlat1) * Math.sin(radlat2) +\n      Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    if (dist > 1) {\n      dist = 1;\n    }\n    dist = Math.acos(dist);\n    dist = (dist * 180) / Math.PI;\n    dist = dist * 60 * 1.1515;\n    dist = dist * 0.99999969062;\n    return dist;\n  }\n}\n\nnavigator.geolocation.getCurrentPosition(position => {\n  startupQuery(position.coords.latitude, position.coords.longitude);\n});\n\nfunction startupQuery(lat = 0, lon = 0) {\n  // eslint-disable-next-line no-undef\n  var startTime = moment()\n    .subtract(12, \"hours\")\n    .toDate();\n\n  let data = [];\n\n  db.collection(\"venues\")\n    .get()\n    .then(venues => {\n      venues.forEach(venue => {\n        var ven_loc = venue.data().location;\n        var miles = distance(ven_loc.latitude, ven_loc.longitude, lat, lon);\n\n        if (miles < 15) {\n          var newVenueObj = { venue: venue.data(), checkins: [] };\n          newVenueObj.venue.id = venue.id;\n          db.collection(`venues/${venue.id}/checkins`)\n            .where(\"timestamp\", \">\", startTime)\n            .get()\n            .then(checkins => {\n              checkins.forEach(checkin => {\n                newVenueObj.checkins.push(checkin.data());\n              });\n            });\n        }\n        data.push(newVenueObj);\n      });\n    });\n}\n\nexport function sendCheckIn(venue_id) {\n  db.collection(\"venues\")\n    .doc(venue_id)\n    .collection(\"checkins\")\n    .add({\n      user_uid: user_uid,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    })\n    .then(() => {\n      console.log(\"Check-in Successful!\");\n    });\n}\n\nexport default function Main() {\n  const classes = useStyles();\n  const [data, setData] = React.useState(null);\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    let lat = 0,\n      lon = 0;\n    navigator.geolocation.getCurrentPosition(position => {\n      lat = position.coords.latitude ? position.coords.latitude : 0;\n      lon = position.coords.longitude ? position.coords.longitude : 0;\n    });\n\n    db.collection(\"venues\")\n      .get()\n      .then(venues => {\n        let temp = [];\n        venues.forEach(venue => {\n          var ven_loc = venue.data().location;\n          var miles = distance(ven_loc.latitude, ven_loc.longitude, lat, lon);\n\n          if (miles < 15) {\n            var newVenueObj = { venue: venue.data(), checkins: [] };\n            newVenueObj.venue.id = venue.id;\n            db.collection(`venues/${venue.id}/checkins`)\n              .get()\n              .then(checkins => {\n                checkins.forEach(checkin => {\n                  newVenueObj.checkins.push(checkin.data());\n                });\n              });\n            temp.push(newVenueObj);\n          }\n        });\n        setData(temp);\n        setIsLoading(false);\n      });\n  }, []);\n\n  return !isLoading ? (\n    <React.Fragment>\n      <div className={classes.heroContent}>\n        <Container maxWidth=\"sm\">\n          <Typography\n            component=\"h5\"\n            variant=\"h6\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            Welcome to Hot List!\n          </Typography>\n          <Typography\n            variant=\"body1\"\n            align=\"center\"\n            color=\"textSecondary\"\n            paragraph\n          >\n            This should be a blurb that says something like \"Looking for\n            something quiet or something loud? We've got it below. Don't forget\n            to check in!\" but sounds better.\n          </Typography>\n        </Container>\n      </div>\n      {console.log(data[0])}\n      <CardGrid\n        data={data\n          .filter(value => Object.keys(value).length !== 0)\n          .sort((a, b) => (a.checkins.length < b.checkins.length ? 1 : -1))}\n        /*data.sort((a, b) =>\n          a.checkInsToday < b.checkInsToday\n            ? 1\n            : a.checkInsToday === b.checkInsToday\n            ? a.checkInsThisWeek < b.checkInsThisWeek\n              ? 1\n              : -1\n            : -1\n        )*/\n      />\n    </React.Fragment>\n  ) : (\n    <CircularProgress className={classes.load} />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}